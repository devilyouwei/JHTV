<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css" />
    <link rel="stylesheet" type="text/css" href="../css/aui.css" />
    <link rel="stylesheet" type="text/css" href="../css/aui-flex.css" />
    <link rel="stylesheet" type="text/css" href="../css/style.css" />
    <style>
        html,
        body {
            background: #fff;
        }

        header {
            background: linear-gradient(to right, #ff6144, #ff0072)!important;
            color: #fff;
            position: fixed!important;
            top: 0;
            left: 0;
            right: 0;
        }

        header .aui-iconfont {
            color: #fff!important;
        }

        .lists .btn-box {
            padding: 0.3rem;
        }

        .lists .btn {
            border: solid 1px #ccc;
            font-size: 0.7rem;
            color: #ccc;
            border-radius: 1rem;
            text-align: center;
            padding: 0.2rem 0;
        }

        .lists {
            padding-top: 380px;
        }

        .lists .title {
            font-size: 1rem;
            font-weight: bold;
            padding: 0.5rem 0.35rem;
            color: #000;
        }

        .lists .btn.active {
            color: #fff;
            border: solid 1px #fff;
            background: linear-gradient(to right, #ff6144, #ff0072)!important;
        }
    </style>
</head>

<body>
    <header class="aui-bar aui-bar-nav">
        <div class="aui-pull-left aui-btn" onclick="closeWin()" tapmode>
            <span class="aui-iconfont aui-icon-left"></span>
        </div>
        <div class="aui-title" id="title"></div>
    </header>
    <div id="vue" v-cloak>
        <section class="lists">
            <div class="title">{{title}}</div>
            <div class="aui-row">
                <div class="aui-col-xs-4" v-for="(item,index) in urls">
                    <div class="btn-box">
                        <div class="btn" :class="index==activeIndex?'active':''" @click="play(index)" tapmode>
                            {{item.name}}
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript" src="../script/app.js"></script>
<script type="text/javascript" src="../script/vue.js"></script>
<script type="text/javascript">
    apiready = function() {
        document.getElementById('title').innerHTML = api.pageParam.title
        $api.fixStatusBar($api.dom('header'));
        var title = api.pageParam.title;
        var urls = api.pageParam.urls;
        var vue = new Vue({
            el: '#vue',
            data: {
                title: title,
                urls: urls,
                activeIndex: $.get(title) || 0
            },
            methods: {
                play(index) {
                    this.activeIndex = index;
                    $.set(title,index);
                }
            },
            watch: {
                activeIndex: {
                    handler(v) {
                        $.openPlayer('http://jhtv.app.devil.ren/dplayer/index.php?url=' + this.urls[v].url + '&title=' + this.urls[v].name);
                    },
                    immediate: true
                }
            }
        })
        api.parseTapmode();
    };

    function closeWin() {
        api.closeWin();
    }
</script>

</html>
